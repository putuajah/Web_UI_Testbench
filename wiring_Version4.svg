<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <style>
    .box { fill:#f7f9fc; stroke:#333; stroke-width:2; rx:8; }
    .box-tft { fill:#eef6ff; stroke:#333; stroke-width:2; rx:6; }
    .box-touch { fill:#fff7e6; stroke:#333; stroke-width:2; rx:6; }
    .box-servos { fill:#f0fff4; stroke:#333; stroke-width:2; rx:6; }
    .box-io { fill:#fff0f0; stroke:#333; stroke-width:2; rx:6; }
    .label { font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; fill:#111; font-size:14px; }
    .monos { font-family: "Courier New", monospace; fill:#222; font-size:13px; }
    .note { font-family: sans-serif; fill:#555; font-size:12px; }
    .line-sig { stroke:#1b9e77; stroke-width:3; marker-end:url(#arrow); }
    .line-power { stroke:#c62828; stroke-width:3; marker-end:url(#arrow); }
    .line-gnd { stroke:#555; stroke-dasharray:4 4; stroke-width:2; marker-end:url(#arrow); }
    .line-io { stroke:#d95f02; stroke-width:3; marker-end:url(#arrow); }
    .pin { font-family: monospace; font-size:12px; fill:#000; }
    .connector { font-family: monospace; font-size:12px; fill:#000; }
  </style>

  <!-- Definitions -->
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 z" fill="#666" />
    </marker>
    <linearGradient id="gradV" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#fff"/>
      <stop offset="1" stop-color="#eee"/>
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="24" y="28" class="label" font-size="20">Wiring Diagram — TestBench Portable (ESP32)</text>

  <!-- ESP32 block -->
  <rect x="24" y="48" width="360" height="540" class="box"/>
  <text x="204" y="78" class="label" text-anchor="middle" font-size="16">ESP32</text>

  <!-- ESP32 pins list -->
  <g transform="translate(40,100)">
    <text class="monos" x="0" y="0">GPIO4  - BUTTON_A (input_pullup)</text>
    <text class="monos" x="0" y="24">GPIO5  - BUTTON_B (input_pullup)</text>
    <text class="monos" x="0" y="48">GPIO12 - SERVO1 (signal)</text>
    <text class="monos" x="0" y="72">GPIO13 - SERVO2 (signal)</text>
    <text class="monos" x="0" y="96">GPIO14 - SERVO3 (signal)</text>
    <text class="monos" x="0" y="120">GPIO16 - LED1 (active HIGH)</text>
    <text class="monos" x="0" y="144">GPIO17 - LED2 (active HIGH)</text>
    <text class="monos" x="0" y="168">GPIO27 - BUZZER (digital)</text>
    <text class="monos" x="0" y="192">GPIO35 - TOUCH_CS (input)</text>
    <text class="monos" x="0" y="216">GPIO34 - TOUCH_IRQ (input)</text>
    <text class="monos" x="0" y="240">GPIO25 - TOUCH_CLK (SPI SCK)</text>
    <text class="monos" x="0" y="264">GPIO26 - TOUCH_DOUT (SPI MISO)</text>
    <text class="monos" x="0" y="288">GPIO32 - TOUCH_DIN (SPI MOSI)</text>
    <text class="monos" x="0" y="312">5V  - VCC (external for servos/TFT if used)</text>
    <text class="monos" x="0" y="336">GND - COMMON GND (required)</text>
  </g>

  <!-- 5V power supply -->
  <g transform="translate(420,60)">
    <rect x="0" y="0" width="140" height="60" rx="6" fill="#fff" stroke="#333"/>
    <text x="70" y="22" class="label" text-anchor="middle">5V Power Supply</text>
    <text x="70" y="42" class="note" text-anchor="middle">Use separate 5V for servos if possible</text>
  </g>

  <!-- TFT block -->
  <rect x="420" y="160" width="300" height="140" class="box-tft"/>
  <text x="570" y="185" class="label" text-anchor="middle">TFT Display (TFT_eSPI)</text>
  <text x="570" y="205" class="monos" text-anchor="middle">SCK / MOSI / MISO / CS / DC / RST</text>

  <!-- Touch controller -->
  <rect x="420" y="320" width="300" height="100" class="box-touch"/>
  <text x="570" y="345" class="label" text-anchor="middle">XPT2046 Touch Controller</text>
  <text x="570" y="365" class="monos" text-anchor="middle">CS(35) / IRQ(34) / CLK(25) / DOUT(26) / DIN(32)</text>

  <!-- Servos block -->
  <rect x="760" y="140" width="380" height="120" class="box-servos"/>
  <text x="950" y="165" class="label" text-anchor="middle">Servos</text>
  <text x="950" y="190" class="monos" text-anchor="middle">S1 - GPIO12 (signal)</text>
  <text x="950" y="210" class="monos" text-anchor="middle">S2 - GPIO13 (signal)</text>
  <text x="950" y="230" class="monos" text-anchor="middle">S3 - GPIO14 (signal)</text>
  <text x="950" y="250" class="note" text-anchor="middle">Power: 5V (external recommended), GND common</text>

  <!-- IO block -->
  <rect x="760" y="280" width="380" height="180" class="box-io"/>
  <text x="950" y="306" class="label" text-anchor="middle">LEDs / Buzzer / Buttons</text>
  <text x="950" y="334" class="monos" text-anchor="middle">LED1 - GPIO16</text>
  <text x="950" y="354" class="monos" text-anchor="middle">LED2 - GPIO17</text>
  <text x="950" y="374" class="monos" text-anchor="middle">BUZZER - GPIO27</text>
  <text x="950" y="394" class="monos" text-anchor="middle">BUTTON_A - GPIO4 (to GND)</text>
  <text x="950" y="414" class="monos" text-anchor="middle">BUTTON_B - GPIO5 (to GND)</text>

  <!-- Wiring lines: signals to servos -->
  <line x1="384" y1="156" x2="760" y2="166" class="line-sig"/>
  <text x="576" y="148" class="connector" text-anchor="middle">GPIO12 → S1 signal</text>

  <line x1="384" y1="180" x2="760" y2="186" class="line-sig"/>
  <text x="576" y="172" class="connector" text-anchor="middle">GPIO13 → S2 signal</text>

  <line x1="384" y1="204" x2="760" y2="206" class="line-sig"/>
  <text x="576" y="196" class="connector" text-anchor="middle">GPIO14 → S3 signal</text>

  <!-- Wiring lines: TFT SPI -->
  <line x1="384" y1="264" x2="420" y2="200" class="line-io"/>
  <text x="402" y="230" class="connector" text-anchor="end">SPI (SCK/MOSI/MISO)</text>

  <!-- Wiring lines: touch controller -->
  <line x1="384" y1="288" x2="420" y2="360" class="line-io"/>
  <text x="402" y="338" class="connector" text-anchor="end">Touch SPI / CS / IRQ</text>

  <!-- Wiring lines: LEDs / buzzer / buttons -->
  <line x1="384" y1="222" x2="760" y2="312" class="line-io"/>
  <text x="572" y="266" class="connector" text-anchor="middle">GPIO16/17/27/4/5 → IO group</text>

  <!-- Power: 5V to servos -->
  <line x1="560" y1="90" x2="760" y2="150" class="line-power"/>
  <text x="660" y="110" class="connector" text-anchor="middle">5V (to servo Vcc)</text>

  <!-- 5V to TFT -->
  <line x1="560" y1="90" x2="540" y2="200" class="line-power"/>
  <text x="540" y="184" class="connector" text-anchor="middle">5V → TFT VCC</text>

  <!-- 5V to touch -->
  <line x1="560" y1="90" x2="540" y2="360" class="line-power"/>
  <text x="540" y="344" class="connector" text-anchor="middle">5V → XPT2046 VCC</text>

  <!-- GND lines (dashed) -->
  <line x1="384" y1="336" x2="760" y2="170" class="line-gnd"/>
  <line x1="384" y1="336" x2="540" y2="200" class="line-gnd"/>
  <line x1="384" y1="336" x2="540" y2="360" class="line-gnd"/>
  <text x="420" y="362" class="note">Common GND between ESP32, servo supply, TFT, touch</text>

  <!-- Small legends -->
  <rect x="24" y="608" width="360" height="120" rx="6" fill="#fff" stroke="#ccc"/>
  <text x="44" y="636" class="label">Legend</text>
  <g transform="translate(44,656)">
    <rect x="0" y="0" width="20" height="8" fill="#1b9e77" stroke="#000"/><text x="28" y="7" class="note">Signal (servo)</text>
    <rect x="0" y="20" width="20" height="8" fill="#c62828" stroke="#000"/><text x="28" y="27" class="note">5V Power</text>
    <rect x="0" y="40" width="20" height="8" fill="#555" stroke="#000"/><text x="28" y="47" class="note">GND (dashed lines)</text>
    <rect x="0" y="60" width="20" height="8" fill="#d95f02" stroke="#000"/><text x="28" y="67" class="note">I/O signals (LED/Buzzer/Buttons/TFT control)</text>
  </g>

  <!-- Footer note -->
  <text x="24" y="756" class="note">Important: This diagram is schematic. Verify wiring and power ratings before connecting — especially servo power. Use appropriate resistors or drivers for LEDs and buzzer if needed.</text>
</svg>